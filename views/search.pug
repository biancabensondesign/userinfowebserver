doctype html
html
	head
		title Search Box Example 1
		meta(name='ROBOTS', content='NOINDEX, NOFOLLOW')
		link(rel='stylesheet' type='text/css' href='css/stylesheet.css')
	body
			ul#nav
			li
			a(href='/') Home
			li
			a(href='/new') Add new user
			li
			a(href='/users') Display all users
			li
			a(href='/search') Search
			#tfheader
			form#tfnewsearch(method='post', action='/search')           
				input#test.tftextinput(type='text', name='q', size='21', maxlength='120', autocomplete='off')
				input.tfbutton(type='submit', value='search')
			ul#dropdown
			.tfclear
				div.output
						if matchedUser
							p #{users.firstname} #{users.lastname}
							p Email: #{users.email}
			script(src='https://code.jquery.com/jquery-3.2.1.js')
			script.
				console.log("Start of AJAX component")
					$(document).ready(()=>{
					$('.tftextinput').on("keyup", () => {
					var catchValue = $('#test').val();
					//- console.log(catchValue);
					$.get('/matchedUsers',{banana: catchValue}, function(data){
					console.log("Server response: "+JSON.stringify(data));
					var string = '';

					for (var i = 0; i < data.matches.length; i++) {
						//- console.log(data[i]);
					string += `<li class="suggest", name="${data.matches[i]}"> ${data.matches[i].firstname} ${data.matches[i].lastname} </li>`
				}
				//- console.log(string)
				$('#dropdown').html(`${string}`);
				
				$('.suggest').on('click', function () {
					var click = $(this).attr('name');
					$('#searchbar').val(`${click}`);
					console.log(click);
				})
					});
					})
					
				})				
    title Search Box Example 1
    meta(name='ROBOTS', content='NOINDEX, NOFOLLOW')
    // CSS styles for standard search box
    style(type='text/css').
      #tfheader{
      background-color:#c3dfef;
      }
      #tfnewsearch{
      float:right;
      padding:20px;
      }
      .tftextinput{
      margin: 0;
      padding: 5px 15px;
      font-family: Arial, Helvetica, sans-serif;
      font-size:14px;
      border:1px solid #0076a3; border-right:0px;
      border-top-left-radius: 5px 5px;
      border-bottom-left-radius: 5px 5px;
      }
      .tfbutton {
      margin: 0;
      padding: 5px 15px;
      font-family: Arial, Helvetica, sans-serif;
      font-size:14px;
      outline: none;
      cursor: pointer;
      text-align: center;
      text-decoration: none;
      color: #ffffff;
      border: solid 1px #0076a3; border-right:0px;
      background: #0095cd;
      background: -webkit-gradient(linear, left top, left bottom, from(#00adee), to(#0078a5));
      background: -moz-linear-gradient(top,  #00adee,  #0078a5);
      border-top-right-radius: 5px 5px;
      border-bottom-right-radius: 5px 5px;
      }
      .tfbutton:hover {
      text-decoration: none;
      background: #007ead;
      background: -webkit-gradient(linear, left top, left bottom, from(#0095cc), to(#00678e));
      background: -moz-linear-gradient(top,  #0095cc,  #00678e);
      }
      /* Fixes submit button height problem in Firefox */
      .tfbutton::-moz-focus-inner {
      border: 0;
      }
      .tfclear{
      clear:both;
      }
  body
    // HTML for SEARCH BAR
    #tfheader
      form#tfnewsearch(method='get', action='/search')           
        input.tftextinput(type='text', name='q', size='21', maxlength='120')
        input.tfbutton(type='submit', value='search')
      .tfclear
        div.output
            //- if matchedUser
            p #{matchedUsers.firstname} #{matchedUsers.lastname} | email: #{matchedUsers.email}


